<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href="/css/style.min.744f758497484f98d65b02d6ff46ee5e38ccf9903976ffd1eaef6ad7401fa99b.css" integrity="sha256-dE91hJdIT5jWWwLW/0buXjjM+ZA5dv/R6u9q10AfqZs="><link rel=stylesheet type=text/css href=/css/syntax-light.min.c3f7545ba2ec853ed9c45e1ac5856a1d2976599c771c238e3a8f73be8bb6a91b.css integrity="sha256-w/dUW6LshT7ZxF4axYVqHSl2WZx3HCOOOo9zvou2qRs=" media="screen and (prefers-color-scheme: light)"><link rel=stylesheet type=text/css href=/css/syntax-dark.min.5d9aada6e7d12e754185f88ac16235771e30527e759abbe1080261284c214c0c.css integrity="sha256-XZqtpufRLnVBhfiKwWI1dx4wUn51mrvhCAJhKEwhTAw=" media="screen and (prefers-color-scheme: dark)"><meta name=description content="I&amp;rsquo;ve been doing a lot of playing around with FreeBSD lately as part of my never-ending quest to find the ideal operating system. There are some things I absolutely love about the system, and its minimalist setup and hardy security defaults made it the ideal candidate to set my website up on."><title>Sporiff.dev | Moving to FreeBSD</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=%3cnil%3e><link rel=icon type=image/png sizes=16x16 href=%3cnil%3e><link rel=manifest href=/site.webmanifest><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rootkey.fra1.cdn.digitaloceanspaces.com/images/avatar.webp"><meta name=twitter:title content="Moving to FreeBSD"><meta name=twitter:description content="I&rsquo;ve been doing a lot of playing around with FreeBSD lately as part of my never-ending quest to find the ideal operating system. There are some things I absolutely love about the system, and its minimalist setup and hardy security defaults made it the ideal candidate to set my website up on."></head><header><nav class=secondary><div><a class=nav-link href=/>Home</a>
<a class=nav-link href=/posts>Posts</a>
<a class=nav-link href=/about>About me</a></div></nav></header><body><section id=content><article><h1>Moving to FreeBSD</h1><div><div class=byline><div class=avatar><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/avatar.webp alt="Avatar for Ciarán Ainsworth" width=48px height=48px></div><div class=author>Ciarán Ainsworth</div><time datetime=2020-02-04>Feb 4, 2020</time></div><aside class=tags><a class=tag href=tags/freebsd>freebsd</a>
<a class=tag href=tags/unix>unix</a>
<a class=tag href=tags/bsd>bsd</a>
<a class=tag href=tags/floss>floss</a></aside></div><br><br><p><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/post_images/beastie.webp alt="The FreeBSD Beastie"></p><p>I&rsquo;ve been making some changes to my current website setup. Before, this site was hosted on the same server that currently hosts my Mastodon instance and Funkwhale pod, as well as my git server. But with gitea&rsquo;s poor performance and the general overcrowding, mixed in with my recent winding down of my Streama server, I decided to make a completely new server for
my website.</p><p>I&rsquo;ve been doing a lot of playing around with <a href=https://freebsd.org>FreeBSD</a> lately as part of my never-ending quest to find the ideal operating system. There are some things I absolutely love about the system, and its minimalist setup and hardy security defaults made it the ideal candidate to set my website up on.</p><p>The initial install was incredibly easy, although I made some mistakes initially with the installation of my SSH key. DO&rsquo;s FreeBSD offering is considerably more hardened than their Debian/Ubuntu ones as they require an SSH key be set up and do not allow the management of root passwords. This suits me just fine as I never use a root password if I can possibly avoid it. A fully featured <code>wheel</code> account is good enough for me.</p><p>After getting everything set up nice, my next adventure came with Nginx. I&rsquo;m so used now to setting up sites and web apps using nginx on Debian-based systems that I can do it in my sleep, but the difference in layout/defaults for Nginx on FreeBSD gave me pause for thought. Once I got into the swing of it, it made a lot of sense and felt a lot more suited to smaller setups, but the initial confusion was somewhat annoying. Not the system&rsquo;s fault in any way (RTFM and all that), but still a puzzler.</p><p>Then I decided to be an idiot. See, DO supplies a default <code>FreeBSD</code> account which is installed with your keys. This account has full root access using <code>sudo</code> and is meant to be used for access and maintenance of the server. But I&rsquo;m an odd fellow, so I really wanted to set my account up to better match my other machines. I installed <code>zsh</code> and decided to <code>chsh</code> my account to change my username and shell. All went well, I moved my home folder and then left the shell to load my new shell. Everything loaded fine, but suddenly my site stopped working. Ah, I realised too late that of course the site is just a symlink from a folder in my home folder, which has now moved. Whoops. I&rsquo;ll just move that b-</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sporiff is not in the sudoers file
</span></span></code></pre></div><p>If you change your username, make sure you also change your sudoers file. Fool.</p><p>Anyway, it was easy enough to get everything torn down and built back up. I&rsquo;ve now got the server all up-to-date and automated and I must say I&rsquo;m pretty happy with its performance so far. It hasn&rsquo;t got a big job, but it&rsquo;s a job I&rsquo;m glad I chose FreeBSD to do.</p></article></section><footer>Copyright (c) 2022 Ciarán Ainsworth</footer></body></html>