<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href="/css/style.min.aae8ee50883b584313558270574543eede36d83be93537b1b82e3f25224db67a.css" integrity="sha256-qujuUIg7WEMTVYJwV0VD7t422DvpNTexuC4/JSJNtno="><link rel=stylesheet type=text/css href=/css/syntax-light.min.c3f7545ba2ec853ed9c45e1ac5856a1d2976599c771c238e3a8f73be8bb6a91b.css integrity="sha256-w/dUW6LshT7ZxF4axYVqHSl2WZx3HCOOOo9zvou2qRs=" media="screen and (prefers-color-scheme: light)"><link rel=stylesheet type=text/css href=/css/syntax-dark.min.5d9aada6e7d12e754185f88ac16235771e30527e759abbe1080261284c214c0c.css integrity="sha256-XZqtpufRLnVBhfiKwWI1dx4wUn51mrvhCAJhKEwhTAw=" media="screen and (prefers-color-scheme: dark)"><meta name=description content="I&amp;rsquo;ve recently been playing around with FreeBSD on one of my laptops. Why? Boredom, frankly."><title>Sporiff.dev | Playing with ports</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=%3cnil%3e><link rel=icon type=image/png sizes=16x16 href=%3cnil%3e><link rel=manifest href=/site.webmanifest><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rootkey.fra1.cdn.digitaloceanspaces.com/images/avatar.webp"><meta name=twitter:title content="Playing with ports"><meta name=twitter:description content="I&rsquo;ve recently been playing around with FreeBSD on one of my laptops. Why? Boredom, frankly."></head><header><nav class=secondary><div><a class=nav-link href=/>Home</a>
<a class=nav-link href=/posts>Posts</a>
<a class=nav-link href=/about>About me</a></div></nav></header><body><section id=content><article><h1>Playing with ports</h1><div><div class=byline><div class=avatar><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/avatar.webp alt="Avatar for Ciarán Ainsworth" width=48px height=48px></div><div class=author>Ciarán Ainsworth</div><time datetime=2020-02-10>Feb 10, 2020</time></div><aside class=tags><a class=tag href=tags/freebsd>FreeBSD</a>
<a class=tag href=tags/unix>unix</a>
<a class=tag href=tags/floss>floss</a>
<a class=tag href=tags/free-software>free software</a>
<a class=tag href=tags/ports>ports</a>
<a class=tag href=tags/lisp>lisp</a>
<a class=tag href=tags/roswell>roswell</a></aside></div><br><br><p><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/post_images/freebsd-logo.webp alt="The FreeBSD logo"></p><p>As mentioned in my <a href=/posts/2020/moving-to-freebsd/>previous post</a>, I&rsquo;ve recently been playing around with FreeBSD on one of my laptops. Why? Boredom, frankly. Boredom with my job, boredom with my lack of social life, boredom with the weather. Whatever the cause, the cure is always computer fun!</p><p>If you&rsquo;ve ever used FreeBSD you&rsquo;re probably already well aware of the ports system. It&rsquo;s the thing that scares people because you mentioned the dreaded &ldquo;S&rdquo; word</p><blockquote><p>Oh, yeah. I usually build that from source to be honest</p><p>You WHAT</p></blockquote><p>I&rsquo;ll admit to being more of a binary package man myself (my time is… well not valuable. But still ticking away!) and I only very rarely dip into the ports tree when a binary doesn&rsquo;t exist or is a long way out of date. But there is a lot of comfort having it there as a backup.</p><p>One piece of software I use quite frequently is <a href=https://github.com/roswell/roswell>Roswell</a>, a lisp implementation/installation manager. It&rsquo;s what I use to install and manage <a href=https://github.com/coleslaw-org/coleslaw>coleslaw</a> (you know, that thing that powers this website). Now, being a spoiled boy from the good side of town over with that Void and Arch bunch, I&rsquo;m used to having Roswell nicely packaged up for me to install at the tippety tap of my fingers. On FreeBSD, this package is unfortunately missing. Ho hum. No worries, thinks I, I&rsquo;ll just install it from source and move on with my life.</p><p>But I got to thinking: how hard <em>is</em> it to actually make a port for something? Looking through the rather excellently written <a href=https://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/>Porter&rsquo;s handbook</a> it <em>looked</em> simple enough, especially since Roswell is essentially a good old fashioned <code>./configure && make && make install</code> jobby. So I started poking around at it and seeing if I could make sense of the syntax and the logic behind it.</p><p>After a few hours of plugging, it looked like I had something usable. It took a bit of swearing and messing up my <code>Makefile</code> (don&rsquo;t believe everything <code>portlint</code> tells you, he&rsquo;s a fibber that one), but eventually I could get it successfully installing, deinstalling, configuring with a PREFIX, and, well, behaving like a package should.</p><p>I&rsquo;ve had a crack at packaging before with <code>.deb</code> and guix. It&rsquo;s always come across as the single most maddening thing in the world to me, so pernickety and demanding for something that should be so simple. Writing the port, on the other hand, was relatively straightforward. You tell it what is required, pass it some special instructions, and just let the standard tools take over from there. This form factor, coupled with the quality of the documentation made this a much less frustrating (and much more rewarding) packaging experience. Granted, I picked a very simple thing to start with. These things get harder logarithmically.</p><p>Anyhow, since it worked for me I decided to actually submit the thing upstream and see if it&rsquo;s good enough to be included.</p><p>Only time will tell.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/Z8alr_XJ0co style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div></article></section><footer>Copyright (c) 2022 Ciarán Ainsworth</footer></body></html>