<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href="/css/style.min.744f758497484f98d65b02d6ff46ee5e38ccf9903976ffd1eaef6ad7401fa99b.css" integrity="sha256-dE91hJdIT5jWWwLW/0buXjjM+ZA5dv/R6u9q10AfqZs="><link rel=stylesheet type=text/css href=/css/syntax-light.min.c3f7545ba2ec853ed9c45e1ac5856a1d2976599c771c238e3a8f73be8bb6a91b.css integrity="sha256-w/dUW6LshT7ZxF4axYVqHSl2WZx3HCOOOo9zvou2qRs=" media="screen and (prefers-color-scheme: light)"><link rel=stylesheet type=text/css href=/css/syntax-dark.min.5d9aada6e7d12e754185f88ac16235771e30527e759abbe1080261284c214c0c.css integrity="sha256-XZqtpufRLnVBhfiKwWI1dx4wUn51mrvhCAJhKEwhTAw=" media="screen and (prefers-color-scheme: dark)"><meta name=description content="I got poking around at this site and was doing some thinking. Mainly along the lines of speed and security. By default, the dark-hyde theme provided by the good folks over at Coleslaw uses Google&amp;rsquo;s CDN for font delivery. This is all well and good, however I&amp;rsquo;m really not a big fan of Google at all and like to avoid them where possible. With that in mind, I started thinking about how I could go about replacing them."><title>Sporiff.dev | Site speed improvements</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=%3cnil%3e><link rel=icon type=image/png sizes=16x16 href=%3cnil%3e><link rel=manifest href=/site.webmanifest><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rootkey.fra1.cdn.digitaloceanspaces.com/images/post_images/rocket.webp"><meta name=twitter:title content="Site speed improvements"><meta name=twitter:description content="I got poking around at this site and was doing some thinking. Mainly along the lines of speed and security. By default, the dark-hyde theme provided by the good folks over at Coleslaw uses Google&rsquo;s CDN for font delivery. This is all well and good, however I&rsquo;m really not a big fan of Google at all and like to avoid them where possible. With that in mind, I started thinking about how I could go about replacing them."></head><header><nav class=secondary><div><a class=nav-link href=/>Home</a>
<a class=nav-link href=/posts>Posts</a>
<a class=nav-link href=/about>About me</a></div></nav></header><body><section id=content><article><h1>Site speed improvements</h1><div><div class=byline><div class=avatar><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/avatar.webp alt="Avatar for Ciarán Ainsworth" width=48px height=48px></div><div class=author>Ciarán Ainsworth</div><time datetime=2020-04-22>Apr 22, 2020</time></div><aside class=tags><a class=tag href=tags/tech>tech</a>
<a class=tag href=tags/blog>blog</a>
<a class=tag href=tags/hosting>hosting</a>
<a class=tag href=tags/technology>technology</a>
<a class=tag href=tags/website>website</a></aside></div><br><br><p><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/post_images/rocket.webp alt="A rocket ship! Zoom!"></p><p>I got poking around at this site and was doing some thinking. Mainly along the lines of speed and security. By default, the dark-hyde theme provided by the good folks over at <a href=https://github.com/coleslaw-org/coleslaw>Coleslaw</a> uses Google&rsquo;s CDN for font delivery. This is all well and good, however I&rsquo;m really not a big fan of Google at all and like to avoid them where possible. With that in mind, I started thinking about how I could go about replacing them.</p><p>The major thing that Google provides on a lot of websites, even those who are privacy-conscious enough not to use abominations like Google analytics, is the serving of fonts and Javascript. Hosting these things through their CDN makes it very straightforward to plug a font or script in without having to worry about hosting the files locally or anything like that. However, it also means that people&rsquo;s browsers are constantly calling out to Google, thereby increasing the web&rsquo;s reliance on them.</p><p>To that I say: eff off.</p><p>Replacing these fonts was reasonably straightforward thanks to the magical combination of <a href=https://digitalocean.com>Digital Ocean&rsquo;s</a> CDN and the <a href=https://google-webfonts-helper.herokuapp.com/fonts>google-webfonts-helper</a>, which made grabbing the relative files and CSS a breeze. Pointing all parts of my theme file to the newly cached CSS files and migrating all images etc. should speed things up at least a little bit, and best of all: no Google! All fonts should have a backup in case DO is a little slow. It&rsquo;s been known to happen.</p><p>The other little hacky thing I did was relates to <a href=/posts/2020/building-smarter/>my earlier post</a> about using a git-based workflow to manage the deployment of this site. I&rsquo;m a fan of the idea of using lazy loading for images since they&rsquo;re not particularly important for this site&rsquo;s content and I&rsquo;d rather let them just load in their own time. However, Coleslaw only produces raw images from Markdown, with no option to add the <code>loading</code> tag. Oh well. This site runs on FreeBSD, baby! Anything is possible. A simple one-liner added to the deployment hook should allow me to stick that in to the files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find . -type f -name <span class=s2>&#34;*.html&#34;</span> -print0 <span class=p>|</span> xargs -0 sed -i <span class=s1>&#39;&#39;</span> -e <span class=s1>&#39;s/&lt;img /&lt;img loading=&#34;lazy&#34; /g&#39;</span>
</span></span></code></pre></div><p>Oh, it&rsquo;s hacky. But it works. I&rsquo;m not really in the mood to go diving through Lisp code to do this in Coleslaw…</p></article></section><footer>Copyright (c) 2022 Ciarán Ainsworth</footer></body></html>