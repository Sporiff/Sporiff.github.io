<!doctype html><html dir=ltr lang=en data-theme><head>
<title>
Ciarán Ainsworth
|
Deploying and controlling Google Chrome settings using Microsoft Intune
</title>
<meta charset=utf-8><meta name=generator content="Hugo 0.92.1"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="
      I write about things for a living


    ">
<link rel=stylesheet href=/css/main.min.440a169ee4b645c09fe67c6bb076175d3eeac345e8abe5925486ca71a3e5289d.css integrity="sha256-RAoWnuS2RcCf5nxrsHYXXT7qw0Xoq+WSVIbKcaPlKJ0=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=/css/markupHighlight.min.058b31f17db60602cc415fd63b0427e7932fbf35c70d8e341a4c39385f5f6f3e.css integrity="sha256-BYsx8X22BgLMQV/WOwQn55MvvzXHDY40Gkw5OF9fbz4=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=/css/custom.min.ec0e83e7d616d38ef6d5b475ac380ecf1b0231c475feef0592fe0299f5ccf347.css integrity="sha256-7A6D59YW04721bR1rDgOzxsCMcR1/u8Fkv4CmfXM80c=" crossorigin=anonymous media=screen>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=canonical href=/posts/deploying-controlling-chrome-intune/>
<script type=text/javascript src=/js/anatole-header.min.2a2cd9614b7d007dfbb75e8da19e3a0fa872ceab53c6d000c00b7a0c89b85bfc.js integrity="sha256-KizZYUt9AH37t16NoZ46D6hyzqtTxtAAwAt6DIm4W/w=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus=" crossorigin=anonymous></script>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="/images/Avatar.png">
<meta name=twitter:title content="Deploying and controlling Google Chrome settings using Microsoft Intune">
<meta name=twitter:description content="Righto. This one has given me a mild headache for the last couple of days, but I&rsquo;ve found a workable solution that allows me to set a home page for users in Chrome. You would have thought that would be really easy, right? Well, Google in its infinite wisdom has decided that conventional Windows management is for wusses. So down the rabbit hole we go.
Ingesting ADMX templates Let us say, for the sake of argument, that you have deployed the Chrome Enterprise .">
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Deploying and controlling Google Chrome settings using Microsoft Intune","headline":"Deploying and controlling Google Chrome settings using Microsoft Intune","alternativeHeadline":"","description":"
      
        Righto. This one has given me a mild headache for the last couple of days, but I\u0026rsquo;ve found a workable solution that allows me to set a home page for users in Chrome. You would have thought that would be really easy, right? Well, Google in its infinite wisdom has decided that conventional Windows management is for wusses. So down the rabbit hole we go.\nIngesting ADMX templates Let us say, for the sake of argument, that you have deployed the Chrome Enterprise .


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"\/posts\/deploying-controlling-chrome-intune\/"},"author":{"@type":"Person","name":"Ciarán Ainsworth"},"creator":{"@type":"Person","name":"Ciarán Ainsworth"},"accountablePerson":{"@type":"Person","name":"Ciarán Ainsworth"},"copyrightHolder":{"@type":"Person","name":"Ciarán Ainsworth"},"copyrightYear":"2018","dateCreated":"2018-07-26T23:00:00.00Z","datePublished":"2018-07-26T23:00:00.00Z","dateModified":"2018-07-26T23:00:00.00Z","publisher":{"@type":"Organization","name":"Ciarán Ainsworth","url":"","logo":{"@type":"ImageObject","url":"favicon-32x32.png","width":"32","height":"32"}},"image":["/images/Avatar.png"],"url":"\/posts\/deploying-controlling-chrome-intune\/","wordCount":"749","genre":["blog"],"keywords":["tech","microsoft","azure","chrome","intune"]}</script>
</head>
<body>
<header><div class="page-top
animated fadeInDown">
<a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
<nav>
<ul class=nav__list id=navMenu>
<div class=nav__links>
<li>
<a href=/ title>Home</a>
</li>
<li>
<a href=/about title>About me</a>
</li>
<li>
<a href=/portfolio title>Portfolio</a>
</li>
</div>
<ul>
<li>
<a class=theme-switch title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a>
</li>
</ul>
</ul>
</nav>
</div>
</header>
<div class=wrapper>
<aside><div class="sidebar
animated fadeInDown">
<div class=sidebar__content>
<div class=logo-title>
<div class=title>
<img src=/images/Avatar.png alt="profile picture">
<h3 title><a href=/>Life inside a computer</a></h3>
<div class=description>
<p>I write about things for a living</p>
</div>
</div>
</div>
<ul class=social-links>
<li>
<a href=https://twitter.com/thatdapperbrit rel=me aria-label title>
<i class="fab fa-twitter fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://mastodon.technology/@cda rel=me aria-label title>
<i class="fab fa-mastodon fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=mailto:ciaranainsworth@outlook.com rel=me aria-label title>
<i class="fas fa-envelope fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://github.com/Sporiff rel=me aria-label title>
<i class="fab fa-github fa-2x" aria-hidden=true></i>
</a>
</li>
</ul>
</div><footer class="footer footer--sidebar">
<div class=by_farbox>
<ul class=footer__list>
<li class=footer__item>
&copy;
Ciarán Ainsworth
2022
</li>
</ul>
</div>
</footer>
<script type=text/javascript src=/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I=" crossorigin=anonymous></script></div>
</aside>
<main>
<div class=autopagerize_page_element>
<div class=content>
<div class="post
animated fadeInDown">
<div class=post-content>
<div class=post-title>
<h1>Deploying and controlling Google Chrome settings using Microsoft Intune</h1>
<div class=info>
<em class="fas fa-calendar-day"></em>
<span class=date>
Thu, Jul 26, 2018
</span>
<em class="fas fa-stopwatch"></em>
<span class=reading-time>4-minute read</span>
</div>
</div><div class=alert>
<div id=indicator>!</div>
Warning: This post is over 365 days old. The information may be out of date.
</div><p>Righto. This one has given me a mild headache for the last couple of days, but I&rsquo;ve found a workable solution that allows me to set a home page for users in Chrome. You would have thought that would be really easy, right? Well, Google in its infinite wisdom has decided that conventional Windows management is for wusses. So down the rabbit hole we go.</p>
<h2 id=ingesting-admx-templates>Ingesting ADMX templates</h2>
<p>Let us say, for the sake of argument, that you have deployed the Chrome Enterprise <code>.msi</code> to your devices either during a build or using Intune. Now you want to control some of the settings for your users in order to provide a consistent experience. If you look around online, you&rsquo;ll see various references to ingesting ADMX templates and leveraging these for using with Chrome. This looks something like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text># Create an OMA-URI to import your ADMX template
* ./Device/Vendor/MSFT/Policy/ConfigOperations/ADMXInstall/Chrome/Policy/ChromeADMX}
* Data Type = String
* Value = the whole body of the Chrome ADMX template
# Leverage policies from within this template using nested OMA-URI settings
* ./Device/Vendor/MSFT/Policy/Config/Chrome~Policy~googlechrome/ShowHomeButton
* Data Type = String
* Value = &lt;enabled/&gt;
</code></pre></div><p>Pretty simple stuff. This allows us to show the home button. Tickedy boo. So what about setting the home page and landing pages for users? Well, unfortunately, this isn&rsquo;t possible.</p>
<p>When you use the CSP settings to load and edit the GPO locally, Chrome detects that the computer is not connected to an on-prem AD, and will ignore certain settings including but not limited to your custom home page. Bum gravy. This is mentioned in some capacity in <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=433112">this thread</a> and in <a href=https://www.chromium.org/administrators/policy-list-3#HomepageLocation>this advisory</a>, but it&rsquo;s far from a satisfactory explanation in an Azure AD connected world.</p>
<h2 id=what-is-a-boy-to-do>What is a boy to do?</h2>
<p>So here&rsquo;s the dilemma. I know that another way to control Chrome is using a file called <code>master_preferences</code> located in the <code>C:\Program Files (x86)\Google\Chrome\Application</code> folder, so for future deployments it would be entirely possible to simply place this in the image. However, we have nearly 60 devices already out in the world due to the unreal pressure we&rsquo;ve been under to deliver, so I need a remote deployment method.</p>
<p>First option is to use Powershell. Powershell could easily be pointed at a publicly accessible Azure blob containing the <code>master_preferences</code> file. The problem with this is that Powershell scripts can only be targeted at users, which would mean that in the long run we would not be able to set different preferences on different types of machines.</p>
<p>So, what about a <code>.msi</code> file? I got this idea in my head to package the file up as an application, which would give us the power not only to deploy per device but also to supersede if we ever want to make changes to the config. The two tools I used to achieve this were <a href=http://nsis.sourceforge.net/Download>NSIS</a> and the free version of <a href=https://www.exemsi.com/download/>exemsi</a>. The steps are as follows:</p>
<ul>
<li>Edit your <code>master_preferences</code> file to reflect the changes you want to make</li>
<li>Place the file in a zip archive</li>
<li>Run NSIS and select &ldquo;Installer based on ZIP file&rdquo;</li>
<li>Select your ZIP file, give the installer a suitable name, and set the"Default Folder" value to <code>C:\Program Files (x86)\Google\Chrome\Application</code></li>
<li>Hit &ldquo;Generate&rdquo; and locate your newly created <code>.exe</code> file</li>
<li>Next, open up exemsi and click &ldquo;Next&rdquo; to start the wizard</li>
<li>Select your newly created executable and change the <code>.msi</code> name if desired</li>
<li>In the installer options, select &ldquo;Per Machine&rdquo; under &ldquo;MSI installation context&rdquo;. This is required to allow you to deploy to devices as opposed to users. If users are your targets, set this to &ldquo;Per User&rdquo;</li>
<li>Give your application and ID and generate an Upgrade Code. This will allow you to uninstall and supersede if needs be, so keep a note of it and use the same code for any new iterations. Intune will notify you if the codes do not match</li>
<li>Enter some information about the product including the name, the manufacturer, and the version number</li>
<li>Optionally, set up contact links</li>
<li>For install and uninstall arguments, use the flag <code>/S</code> (make sure this is capital). This is the standard NSIS silent install flag</li>
<li>There is no need to enter any before/after command lines</li>
<li>Hit &ldquo;Build&rdquo; at the end and it will generate a <code>.msi</code></li>
</ul>
<p>After this, upload your <code>.msi</code> to Intune, deploy it to a test group, and watch the magic happen. Please note that you cannot deploy the ADMX template and the <code>master_preferences</code> file at the same time as the two conflict with one another.</p>
</div>
<div class=post-footer>
<div class=info>
<span class=separator><a class=category href=/categories/blog/>blog</a></span>
<span class=separator><a class=tag href=/tags/tech/>tech</a><a class=tag href=/tags/microsoft/>microsoft</a><a class=tag href=/tags/azure/>azure</a><a class=tag href=/tags/chrome/>chrome</a><a class=tag href=/tags/intune/>intune</a></span>
</div>
</div>
</div>
</div>
</div>
</main>
</div><footer class="footer footer--base">
<div class=by_farbox>
<ul class=footer__list>
<li class=footer__item>
&copy;
Ciarán Ainsworth
2022
</li>
</ul>
</div>
</footer>
<script type=text/javascript src=/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I=" crossorigin=anonymous></script></body>
</html>