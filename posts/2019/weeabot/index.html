<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href="/css/style.min.744f758497484f98d65b02d6ff46ee5e38ccf9903976ffd1eaef6ad7401fa99b.css" integrity="sha256-dE91hJdIT5jWWwLW/0buXjjM+ZA5dv/R6u9q10AfqZs="><link rel=stylesheet type=text/css href=/css/syntax-light.min.c3f7545ba2ec853ed9c45e1ac5856a1d2976599c771c238e3a8f73be8bb6a91b.css integrity="sha256-w/dUW6LshT7ZxF4axYVqHSl2WZx3HCOOOo9zvou2qRs=" media="screen and (prefers-color-scheme: light)"><link rel=stylesheet type=text/css href=/css/syntax-dark.min.5d9aada6e7d12e754185f88ac16235771e30527e759abbe1080261284c214c0c.css integrity="sha256-XZqtpufRLnVBhfiKwWI1dx4wUn51mrvhCAJhKEwhTAw=" media="screen and (prefers-color-scheme: dark)"><meta name=description content="So I&amp;rsquo;ve been having some fun recently trying to teach myself Rust I&amp;rsquo;m not really a programmer by any stretch of the imagination (yet!) but was challenged to write a bot for a Matrix chatroom I frequent. Most of us have written bots already, so it was my time to try something."><title>Sporiff.dev | weeabot</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=%3cnil%3e><link rel=icon type=image/png sizes=16x16 href=%3cnil%3e><link rel=manifest href=/site.webmanifest><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rootkey.fra1.cdn.digitaloceanspaces.com/images/post_images/weeabot.webp"><meta name=twitter:title content="weeabot"><meta name=twitter:description content="So I&rsquo;ve been having some fun recently trying to teach myself Rust I&rsquo;m not really a programmer by any stretch of the imagination (yet!) but was challenged to write a bot for a Matrix chatroom I frequent. Most of us have written bots already, so it was my time to try something."></head><header><nav class=secondary><div><a class=nav-link href=/>Home</a>
<a class=nav-link href=/posts>Posts</a>
<a class=nav-link href=/about>About me</a></div></nav></header><body><section id=content><article><h1>weeabot</h1><div><div class=byline><div class=avatar><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/avatar.webp alt="Avatar for Ciarán Ainsworth" width=48px height=48px></div><div class=author>Ciarán Ainsworth</div><time datetime=2019-07-06>Jul 6, 2019</time></div><aside class=tags><a class=tag href=tags/tech>tech</a>
<a class=tag href=tags/chat>chat</a>
<a class=tag href=tags/communication>communication</a>
<a class=tag href=tags/rust>rust</a></aside></div><br><br><p><img src=https://rootkey.fra1.cdn.digitaloceanspaces.com/images/post_images/weeabot.webp alt="A screenshot of Weeabot"></p><p>So I&rsquo;ve been having some fun recently trying to teach myself <a href=https://rust-lang.org>Rust</a>. I&rsquo;m not really a programmer by any stretch of the imagination (yet!) but was challenged to write a bot for a Matrix chatroom I frequent. Most of us have written bots already, so it was my time to try something.</p><p>Originally I had planned to use Python like I had done previously for my Mastodon bot, <a href=https://github.com/Sporiff/tsukumogami>tsukumogami</a> However, I&rsquo;d been hearing some interesting things about Rust and decided it would be a fun challenge to try and write something functional in the language.</p><h2 id=features>Features</h2><p>Weeabot&rsquo;s current features include the following:</p><ul><li>The ability to convert romaji to kana</li><li>The ability to convert kana to romaji</li><li>The ability to translate a string to a given
language using Yandex translate</li><li>Various silly responses to triggers</li></ul><p>Of these the Yandex call was definitely the hardest to get right. I had originally hoped to use a crate for this, but <a href=https://crates.io/crates/ytr>the one I found</a> unfortunately didn&rsquo;t compile due to depending on old crates which had an old OpenSSL version. After spending some time trying to write the call myself I realised it was easier to fix the crate and use it anyway. I&rsquo;ve since <a href=https://github.com/ilunev/ytr/pull/1>presented this fix</a> to the original maintainer, so hopefully it will be usable again soon.</p><h2 id=some-observations>Some observations</h2><p>Rust is a challenging language for a newcomer as it is very strict about getting things right before compilation. This is the right thing to do, and thankfully the compiler is excellent at giving instruction on what is wrong and possible ways to fix it. But unlike Python (which really is a pick-up-and-play language in many ways), Rust really does not want you to run something that is broken.</p><p>Rust is also probably the wrong language for this project. While there is a nice ready-made <a href=https://docs.rs/matrix_bot_api/0.4.0/matrix_bot_api/>matrix_bot_api crate</a>, it is clear that the language is designed for more complex stuff than this. I would probably have had an easier time using a more web-oriented language. Originally the challenge had been to use <a href=https://dlang.org>Dlang</a>, but I was much more interested in Rust.</p><h2 id=some-fun-stuff>Some fun stuff</h2><p>So far I&rsquo;ve learned a lot not just about Rust but also about Matrix, APIs, and deployment pipelines. As a joke, this bot (which essentially just posts shitposts that pastiche typical weeaboo-esque responses) has been set up with a fully functional test environment and pipeline for test, build, and deployment to a live server. This was an interesting challenge as I have previously understood bits and pieces about the process from my interactions with Netlify and Funkwhale, but have never set it up for myself before.</p><p>Another fun thing has been getting to play with <a href=https://crates.io>Crates</a>. Crates are amazingly helpful in giving you a good starting point to build from and feel much more convenient to me than Python libs. Most of this bot is just different crates stuck together, although I have actually pushed a fix for the yandex translation crate I used. So I&rsquo;m not just a leech!</p><p>Anyway, the source code for the bot can be found on my <a href=https://github.com/Sporiff/weeabot>GitHub</a>. There are still some features I want to get working, but I&rsquo;m pretty happy with its performance thus far as a translation bot alone.</p></article></section><footer>Copyright (c) 2022 Ciarán Ainsworth</footer></body></html>